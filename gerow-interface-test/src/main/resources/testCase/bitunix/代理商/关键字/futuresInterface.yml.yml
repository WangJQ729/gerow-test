keyWord:
  step:
    - name: 市价开仓
      url: /futures/futures/order/market
      method: POST
      headers:
        Token: ${token}
      body: |
        {"amount":"${amount}","side":"${side}","symbol":"${symbol}","reductionOnly":false}
      extractor:
        - json:
            orderId: $.data.orderId
    - name: 市价平仓
      url: /futures/futures/position/close/market
      method: POST
      headers:
        Token: ${token}
      body: |
        {"symbol":"${symbol}","side":${side},"amount":"${amount}","price":"","positionId":"${position_id}"}
      extractor:
        - json:
            closeOrderId: $.data.orderId
    - name: 历史成交查询
      url: /futures/futures/order/deals/page
      method: GET
      headers:
        Token: ${token}
      variables:
        page: 1
        pageSize: 10
        side: 0
      extractor:
        - json:
            openDealFee: $.data.records[?(@.orderId=='${orderId}')].dealFee
          size: 100
    - name: U本位合约历史委托
      untilWait: 5
      url: /futures/futures/order/history
      method: GET
      headers:
        Token: ${token}
      variables:
        page: 1
        pageSize: 10
        side: 0
        type: 2
      extractor:
        - json:
            openDealFee: $.data.records[?(@.orderId=='${orderId}' && @.side==2)].dealFee
    - keyWord: U本位合约历史委托
      name: U本位合约历史委托-平仓
      extractor:
        - json:
            closeDealFee: $.data.records[?(@.orderId=='${closeOrderId}')].dealFee
    - name: 合约划转现货
      url: /futures/futures/assets/futures2spot
      method: POST
      headers:
        Token: ${token}
      body: |
        {"symbol":"USDT","amount":"999"}
      assertion: [json: {$.code: 0}]