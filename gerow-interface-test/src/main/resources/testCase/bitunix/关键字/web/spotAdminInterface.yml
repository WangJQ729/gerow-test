keyWord:
  step:
    - name: ç°è´§åå°è·å–ç™»å½•ä¿¡æ¯
      host: ${spotAdmin_host}
      url: /api/login
      method: POST
      body: |
        {
            "userName": "${userName}",
            "password": "${__digest(MD5,${password})}"
        }
      extractor:
        - json:
            spotAdmin_userId: $.result.userId
    - name: ç°è´§åå°è·å–googleKey
      host: ${spotAdmin_host}
      url: /api/get_google_key
      method: GET
      variables:
        userId: ${spotAdmin_userId}
      extractor:
        - json:
            googleKey: $.result.googleKey
    - name: ç™»å½•ç°è´§åå°
      host: ${spotAdmin_host}
      url: /api/google_auth
      method: POST
      body: |
        {
            "googleCode": "${__GoogleAuthenticator(${spotAdminGoogleCode})}",
            "userName": "${userName}",
            "password": "${__digest(MD5,${password})}",
            "authType": 2,
            "googleKey": "${googleKey}"
        }
      extractor:
        - json:
            spotAdminUserId: $.result.token
          site: TESTSUITE
    - name: ä»»åŠ¡ç±»å¥–åŠ±æ´»åŠ¨åˆ—è¡¨-æ´»åŠ¨ä¸å­˜åœ¨
      host: ${spotAdmin_host}
      url: /api/recharge/common/act/list
      untilWait: 10
      variables:
        actName: ${actCode}
        page: 1
        pageSize: 20
      headers:
        Token: ${spotAdminUserId}
      method: GET
      assertion:
        - json:
            $.code: '0'
            $.result.items.length(): 0
    - name: ä»»åŠ¡ç±»å¥–åŠ±æ´»åŠ¨åˆ—è¡¨
      keyWord: ä»»åŠ¡ç±»å¥–åŠ±æ´»åŠ¨åˆ—è¡¨-æ´»åŠ¨ä¸å­˜åœ¨
      extractor:
        - json:
            actId: $.result.items[?(@.actName == '${actCode}')].id
      assertion:
        - json:
            $.code: '0'
            $.result.items[?(@.actName == '${actCode}')].status:
              - ${actStatusType}
    - name: åˆ›å»ºä»»åŠ¡ç±»å¥–åŠ±æ´»åŠ¨
      host: ${spotAdmin_host}
      url: /api/recharge/common/act/manage
      headers:
        Token: ${spotAdminUserId}
      method: POST
      body: |
        {
            "type": "${type}",
            "data": {
                "minBalance": "${minBalance}",
                "actName": "${actCode}",
                "actStartTime": "${actStartTime}",
                "showId": -1,
                "nickName": "",
                "vipLevels": "",
                "actEndTime": "${actEndTime}",
                "actEnrollStartTime": "${actEnrollStartTime}",
                "actEnrollEndTime": "${actEnrollEndTime}",
                "link": "${actCode}",
                "actRuleDetails": [
                    {
                        "ruleLadder": 1,
                        "firstRuleName": "${firstRuleName}",
                        "firstRuleOperator": ">=",
                        "ruleCondition": "and",
                        "award": "${award}",
                        "awardAmt": "${awardAmt}",
                        "couponId": ${couponId},
                        "awardNumber": "${awardNumber}",
                        "firstRuleTarget": "${firstRuleTarget}"
                    }
                ],
                "driftEffectSwitch": false,
                "driftEffectImg": "",
                "color": "#B9F641",
                "webBgImg": [
                    {
                        "langKey": "en-US",
                        "content": "https://bitunix-public.oss-ap-northeast-1.aliyuncs.com/config/kv/297126.jpg"
                    }
                ],
                "h5BgImg": [
                    {
                        "langKey": "en-US",
                        "content": "https://bitunix-public.oss-ap-northeast-1.aliyuncs.com/config/kv/257556.jpg"
                    }
                ],
                "recommendImg": [
                    {
                        "langKey": "en-US",
                        "content": "https://bitunix-public.oss-ap-northeast-1.aliyuncs.com/config/kv/858207.jpg"
                    }
                ],
                "recommendText": [
                    {
                        "langKey": "en-US",
                        "content": "ğŸ‰ ã€äº¤æ˜“æ‰€åˆçº¦èµ é‡‘æ´»åŠ¨ã€‘ ğŸ‰ ğŸš€ é™æ—¶å¥½ç¤¼ï¼å‚ä¸äº¤æ˜“æ‰€åˆçº¦èµ é‡‘æ´»åŠ¨ï¼Œè½»æ¾è·å–é¢å¤–èµ é‡‘ï¼å¼€å¯æ‚¨çš„äº¤æ˜“ä¹‹æ—…ï¼Œäº«å—æ›´å¤šæ”¶ç›Šï¼ä¸å®¹é”™è¿‡çš„æœºä¼šï¼Œç«‹å³å‚ä¸ï¼ğŸ’°âœ¨ #åˆçº¦äº¤æ˜“ #èµ é‡‘æ´»åŠ¨ #äº¤æ˜“æ‰€ #é¢å¤–æ”¶ç›Š #é™æ—¶ä¼˜æƒ \n\n"
                    }
                ],
                "actDetails": [
                    {
                        "langKey": "en-US",
                        "content": "<p>ğŸ“œ æ´»åŠ¨è§„åˆ™ï¼š</p>\n<ol>\n<li>\n<p><strong>æ´»åŠ¨æ—¶é—´</strong>ï¼šæœ¬æ¬¡äº¤æ˜“æ‰€åˆçº¦èµ é‡‘æ´»åŠ¨å°†äºæ´»åŠ¨å¼€å§‹åçš„ä¸€ä¸ªæœˆå†…ä¸¾è¡Œï¼Œå…·ä½“æ—¶é—´è¯·ä»¥å®˜æ–¹å…¬å‘Šä¸ºå‡†ã€‚</p>\n</li>\n<li>\n<p><strong>å‚ä¸èµ„æ ¼</strong>ï¼šæ‰€æœ‰æ³¨å†Œå¹¶é€šè¿‡èº«ä»½éªŒè¯çš„äº¤æ˜“æ‰€ç”¨æˆ·å‡å¯å‚ä¸ã€‚</p>\n</li>\n<li>\n<p><strong>èµ é‡‘è®¡ç®—</strong>ï¼šæ ¹æ®ç”¨æˆ·åœ¨æ´»åŠ¨æœŸé—´çš„åˆçº¦äº¤æ˜“é‡ï¼ŒæŒ‰ç…§ä¸€å®šæ¯”ä¾‹è¿›è¡Œèµ é‡‘è®¡ç®—ã€‚å…·ä½“èµ é‡‘æ¯”ä¾‹å’Œä¸Šé™è¯·å‚è€ƒæ´»åŠ¨é¡µé¢ã€‚</p>\n</li>\n<li>\n<p><strong>èµ é‡‘å‘æ”¾</strong>ï¼šèµ é‡‘å°†åœ¨æ´»åŠ¨ç»“æŸåçš„5ä¸ªå·¥ä½œæ—¥å†…å‘æ”¾è‡³ç”¨æˆ·çš„äº¤æ˜“æ‰€è´¦æˆ·ä¸­ã€‚</p>\n</li>\n<li>\n<p><strong>èµ é‡‘ä½¿ç”¨</strong>ï¼šèµ é‡‘ä»…å¯ç”¨äºåˆçº¦äº¤æ˜“ï¼Œä¸èƒ½ç›´æ¥æç°ã€‚ä½†ç”¨æˆ·å¯ä»¥ä½¿ç”¨èµ é‡‘è·å¾—çš„åˆ©æ¶¦è¿›è¡Œæç°ã€‚</p>\n</li>\n<li>\n<p><strong>è¿è§„å¤„ç†</strong>ï¼šä»»ä½•å½¢å¼çš„æ¶æ„æ“ä½œã€åˆ·é‡è¡Œä¸ºæˆ–è¿åäº¤æ˜“æ‰€è§„å®šçš„è¡Œä¸ºéƒ½å°†å¯¼è‡´å–æ¶ˆèµ é‡‘èµ„æ ¼å¹¶å¯èƒ½è¢«å°å·å¤„ç†ã€‚</p>\n</li>\n<li>\n<p><strong>æœ€ç»ˆè§£é‡Šæƒ</strong>ï¼šæœ¬æ´»åŠ¨çš„æœ€ç»ˆè§£é‡Šæƒå½’äº¤æ˜“æ‰€æ‰€æœ‰ï¼Œå¦‚æœ‰ä»»ä½•äº‰è®®ï¼Œäº¤æ˜“æ‰€ä¿ç•™æœ€ç»ˆè£å®šæƒã€‚</p>\n</li>\n<li>\n<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šå‚ä¸æ´»åŠ¨å‰ï¼Œè¯·åŠ¡å¿…ä»”ç»†é˜…è¯»å¹¶ç†è§£æ´»åŠ¨è§„åˆ™åŠé£é™©æç¤ºã€‚åˆç†è§„åˆ’äº¤æ˜“ï¼Œè°¨æ…å‚ä¸ï¼Œç†æ€§æŠ•èµ„ã€‚</p>\n</li>\n</ol>\n<p>ğŸŒŸ æŠ“ä½æœºä¼šï¼ŒåŠ å…¥æˆ‘ä»¬çš„åˆçº¦èµ é‡‘æ´»åŠ¨ï¼Œäº«å—æ›´å¤šäº¤æ˜“ä¹è¶£å’Œæ”¶ç›Šï¼</p>"
                    }
                ],
                "actAward": "experience",
                "joinType": 1
            }
        }
      assertion: [ json: { $.code: '0' } ]
    - name: åˆ›å»ºä»»åŠ¡ç±»å¥–åŠ±æ´»åŠ¨-æŒ‡å®švipç­‰çº§
      keyWord: åˆ›å»ºä»»åŠ¡ç±»å¥–åŠ±æ´»åŠ¨
      bodyEditor:
        json:
          $.data.vipLevels: ${vipLevel}
    - name: åˆ é™¤ä»»åŠ¡ç±»å¥–åŠ±æ´»åŠ¨
      host: ${spotAdmin_host}
      url: /api/recharge/common/act/delete
      headers:
        Token: ${spotAdminUserId}
      method: POST
      body: |
        {"actId":${actId}}
      assertion: [ json: { $.code: '0' } ]
    - name: åˆ é™¤ä»»åŠ¡ç±»å¥–åŠ±æ´»åŠ¨-ä¸å…è®¸åˆ é™¤
      keyWord: åˆ é™¤ä»»åŠ¡ç±»å¥–åŠ±æ´»åŠ¨
      assertion:
        - json:
            $.code: 2
            $.message: å½“å‰çŠ¶æ€ä¸å…è®¸åˆ é™¤
    - name: ä¿®æ”¹vipç­‰çº§
      host: ${spotAdmin_host}
      url: /api/user/vip/set_vip
      headers:
        Token: ${spotAdminUserId}
      method: POST
      body: |
        {
        "vipLevel": ${realVipLevel},
        "expireTime": ${__groovy((long)(${__timeShift(,,P7D,,)}/1000),)},
        "uid": ${userId}
        }
      assertion: [ json: { $.code: '0' } ]