name: example
beforeSuite:
  name: 前置处理
  step:
    - name: 执行登录
      url: /login
      variables:
        username: ${username}
        password: ${password}
      method: GET
      assertion:
        - key: $.msg
          value: 登录成功！
      save:
        - site: TESTSUIT
          value: $.token
          name: token
testMethod:
  - name: GET请求
    step:
      - name: GET请求
        url: /get
        headers:
          Authorization: ${token}
        method: GET
        assertion:
          - key: $.name
            value: jqTest
  - name: 登录校验
    step:
      - name: GET请求
        url: /get
        #headers:
        #  Authorization: ${token}
        method: GET
        assertion:
          - key: $.msg
            value: 用户未登录！
  - name: POST请求
    step:
      - name: POST请求
        url: /post
        headers:
          Authorization: ${token}
        method: POST
        body: |
          {"num1": 1,"num2": 2}
        assertion:
          - key: $.result
            value: 3

  - name: 参数校验
    step:
      - byName: POST请求
        name: 参数校验
    fieldCheck:
      - {key: $.num1, value: "",msg: 参数1不应该为空}
      - {key: $.num2, value: "",msg: 参数2不应该为空}

  - name: byName用例
    step:
      - byName: POST请求
        name: byName用例
        body: |
          {"num1": 2,"num2": 4}
        assertion:
          - key: $.result
            value: 6
      - byName: GET请求
      - byName: POST请求