name: 统一前置处理
#所有测试执行前执行
beforeSuite:
  name: 登录mp后台
  step:
    - name: 登录晓多明察
      host: ${mc_test}
      url: /api/v1/account/login
      method: POST
      body: |
        {"username":"${shopName}","password":"123456"}
      assertion: [json: {$.code: 0}]
    - byName: 获取MP后台地址
    - byName: 进入主页
    - byName: 获取shop_id
    - byName: 登录test-tools
    - name: 设置数量优先模式
      host: ${mc_test}
      url: /api/v1/emotion/update
      method: POST
      body: |
        {"detect_mode":2}
      assertion: [json: {$.code: 0}]
afterSuite:
  name: 测试结束后还原类目
  step:
    - byName: 切换类目